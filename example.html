<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test ecs</title>
  </head>
  <body>
    <script src="src/entity.js"></script>
    <script src="src/component.js"></script>
    <script src="src/managers.js"></script>
    <script src="src/system.js"></script>
    <script src="src/utils.js"></script>
    <script>
      let eventManager = new EventManager();
      let entityManager = new EntityManager(eventManager);
      let canvasManager = new CanvasManager();
      let systemManager = new SystemManager(canvasManager, entityManager, eventManager);

      class RenderSystem extends System {
        update() {
          console.log(this.entities);
        }
      }

      systemManager.addSystem(new RenderSystem(), 'render', 'position');

      class RenderComponent extends Component {
        constructor(color) {
          super();
          this.color = color;
        }
      }

      class PositionComponent extends Component {
        constructor(x, y) {
          super();
          this.x = x;
          this.y = y;
        }
      }

      let leftwall = entityManager.create('wall', 'leftwall');
      entityManager.addComponent(leftwall,
        new RenderComponent('black'),
        new PositionComponent(1, 2)
      );

      let rightwall = entityManager.create('wall', 'rightwall');
      entityManager.addComponent(rightwall,
        new RenderComponent('red'),
        new PositionComponent(5, 7)
      );

      let invisiblewall = entityManager.create('wall', 'invisiblewall');
      entityManager.addComponent(invisiblewall,
        new PositionComponent(10, 20)
      );

      systemManager.updateLoop();
    </script>
  </body>
</html>
