<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test ecs</title>
  </head>
  <body>
    <script src="src/component/component.js"></script>
    <script src="src/entity/entitystore.js"></script>
    <script src="src/entity/entity.js"></script>
    <script src="src/math/vector.js"></script>
    <script src="src/message/dispatch.js"></script>
    <script src="src/system/systemstore.js"></script>
    <script src="src/system/system.js"></script>
    <script src="src/tick/ticker.js"></script>
    <script src="src/utils/utils.js"></script>
    <script>
      class RenderSystem extends DrawSystem {
        render(dt) {
          console.log(this.entities);
        }
      }

      dispatch = new Dispatch();
      entityStore = new EntityStore(dispatch);
      systemStore = new SystemStore(dispatch, entityStore);

      systemStore.register(new RenderSystem(), 'render', 'position');

      class RenderComponent extends Component {
        constructor(color) {
          super();
          this.color = color;
        }
      }

      class PositionComponent extends Component {
        constructor(x, y) {
          super();
          this.x = x;
          this.y = y;
        }
      }

      let leftwall = entityStore.create('wall', 'leftwall');
      entityStore.addComponent(leftwall,
        new RenderComponent('black'),
        new PositionComponent(1, 2)
      );

      let rightwall = entityStore.create('wall', 'rightwall');
      entityStore.addComponent(rightwall,
        new RenderComponent('red'),
        new PositionComponent(5, 7)
      );

      let invisiblewall = entityStore.create('wall', 'invisiblewall');
      entityStore.addComponent(invisiblewall,
        new PositionComponent(10, 20)
      );

      systemStore.renderLoop();
    </script>
  </body>
</html>
